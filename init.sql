-- Убедитесь, что расширение PostGIS установлено
CREATE EXTENSION IF NOT EXISTS postgis;

CREATE TABLE tariffs_full_w_geo (
    road VARCHAR(255),
    day_of_week VARCHAR(50),
    time_range VARCHAR(50),
    time_start TIME,
    time_end TIME,
    car_type VARCHAR(50),
    zone VARCHAR(50),
    transponder VARCHAR(50),
    transponder_type VARCHAR(50),
    price NUMERIC(10, 2),
    tariff VARCHAR(50),
    direction VARCHAR(50),
    postpay_time TIME,
    id SERIAL PRIMARY KEY,
    road_id INT,
    name VARCHAR(255),
    color VARCHAR(50),
    geodata GEOMETRY(LINESTRING, 4326)
);

INSERT INTO tariffs_full_w_geo (
    road, day_of_week, time_range, time_start, time_end, car_type, zone, transponder, transponder_type, price, tariff, direction, postpay_time, road_id, name, color, geodata
) VALUES (
    'проспект Багратиона (СДКП)', 'Понедельник', 'Круглосуточно', '00:00:00', '23:59:59', 
    '1 класс; Легковой транспорт', 'Весь участок (проспект Багратиона)', 'нет', NULL, 600, 'Базовый', 'Все направления', NULL, 1, 'проспект Багратиона (СДКП)', '#ff00aa87',
    ST_GeomFromText('LINESTRING(37.37774683768728 55.728850979442996, 37.380497900394005 55.72851702931305, 37.382919494513175 55.72866545194577, 37.38634596782455 55.72939828042328, 37.38883346764359 55.729769336606125, 37.39123858833335 55.72981571725188, 37.3942038056216 55.72944467054461, 37.39779502342708 55.7289437524918, 37.40160038561433 55.72833150985983, 37.405537535235936 55.72781202373426, 37.41012319808215 55.72734527327796, 37.41238115226636 55.72721356679085, 37.41645008932238 55.72734344096074, 37.42214989031655 55.72728821475437, 37.44765080492911 55.727130524783604, 37.452724609887554 55.72712126591256, 37.45499794314182 55.727306800747584, 37.463778287997 55.728707570816056, 37.49374396987014 55.733365187306276, 37.497335177474696 55.73398662613502, 37.49983913874104 55.73457095511287, 37.50603314735278 55.7364722902677, 37.507499282568006 55.73718642346327, 37.5089818912127 55.73822513933217, 37.510005956842406 55.73919821095305, 37.512724072690276 55.74199882650586, 37.51420823238249 55.74337228819172, 37.51598736275483 55.74451283850493, 37.517173449670764 55.745069192413666, 37.52116001958072 55.7463487762993, 37.52409229780747 55.7472667181415, 37.527189302531184 55.748518414931226, 37.52947910230381 55.749241602265215, 37.53178538241693 55.74987205967872)', 4326)
);

CREATE TABLE points_data (
    point_from VARCHAR(50),
    point_to VARCHAR(50),
    zone VARCHAR(255),
    road VARCHAR(255),
    indexes TEXT
);

INSERT INTO points_data (
    point_from, point_to, zone, road, indexes)
VALUES (
    'Наро-Фоминское шоссе (север от М1)', 'Кокошкинское шоссе', '33 км - 66 км (М-1 "Беларусь")', 'М-1 "Беларусь"', '1252;1251;1250;1249;1242;1339;1338;1336;1335;1328;1326;1324;1318;1316;1314;1312;1311;1292;1291;1290;1275;1274;1287'
    );

CREATE TABLE partsOfRoadsByIndex (
    road VARCHAR(255),
    type VARCHAR(150),
    index_road INT,
    geoline TEXT,
    styleUrl TEXT
);

INSERT INTO partsOfRoadsByIndex (
    road, type, index_road, geoline, styleUrl)
VALUES (
    'М-11 Нева', 'Съезд', '1', '37.46810813477451,55.883410179618096 37.46837166181023,55.88340603375674 37.46856880417282,55.883412064091026 37.46909652879643,55.8834934734989 37.47015734246182,55.88369247357699 37.47123961379932,55.88390654827514 37.4727751784603,55.88423745718049 37.47337196996608,55.88438067426563 37.474261122254504,55.884618865741885 37.47544665863905,55.8849452459782 37.47570104503934,55.885014278024336 37.47600145244899,55.88509040775793 37.47683561945263,55.88531125851284', 
    '#strokeColor:177bc9e6_strokeWidth:5'
    );